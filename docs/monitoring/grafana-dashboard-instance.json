{"annotations":{"list":[]},"editable":true,"graphTooltip":1,"panels":[{"id":200,"title":"Health","type":"row","gridPos":{"h":1,"w":24,"x":0,"y":0}},{"id":21,"title":"Phase","type":"stat","gridPos":{"h":4,"w":5,"x":0,"y":1},"targets":[{"expr":"openclaw_instance_phase{namespace=\"$namespace\",instance=\"$instance\"} == 1","legendFormat":"","refId":"A","instant":true}],"fieldConfig":{"defaults":{}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":22,"title":"Ready","type":"stat","gridPos":{"h":4,"w":5,"x":5,"y":1},"targets":[{"expr":"openclaw_instance_ready{namespace=\"$namespace\",instance=\"$instance\"}","legendFormat":"","refId":"A","instant":true}],"fieldConfig":{"defaults":{}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":23,"title":"CPU %","type":"gauge","gridPos":{"h":4,"w":5,"x":10,"y":1},"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\"}[5m])) / sum(kube_pod_container_resource_limits{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\",resource=\"cpu\"})","legendFormat":"","refId":"A","instant":true}],"fieldConfig":{"defaults":{"max":1,"min":0,"thresholds":{"steps":[{"color":"green","value":null},{"color":"yellow","value":0.8},{"color":"red","value":0.9}]},"unit":"percentunit"}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":24,"title":"Memory %","type":"gauge","gridPos":{"h":4,"w":5,"x":15,"y":1},"targets":[{"expr":"sum(container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\"}) / sum(kube_pod_container_resource_limits{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\",resource=\"memory\"})","legendFormat":"","refId":"A","instant":true}],"fieldConfig":{"defaults":{"max":1,"min":0,"thresholds":{"steps":[{"color":"green","value":null},{"color":"yellow","value":0.8},{"color":"red","value":0.9}]},"unit":"percentunit"}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":25,"title":"PVC %","type":"gauge","gridPos":{"h":4,"w":4,"x":20,"y":1},"targets":[{"expr":"kubelet_volume_stats_used_bytes{namespace=\"$namespace\",persistentvolumeclaim=~\"data-$instance.*\"} / kubelet_volume_stats_capacity_bytes{namespace=\"$namespace\",persistentvolumeclaim=~\"data-$instance.*\"}","legendFormat":"","refId":"A","instant":true}],"fieldConfig":{"defaults":{"max":1,"min":0,"thresholds":{"steps":[{"color":"green","value":null},{"color":"yellow","value":0.8},{"color":"red","value":0.9}]},"unit":"percentunit"}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":201,"title":"CPU","type":"row","gridPos":{"h":1,"w":24,"x":0,"y":5}},{"id":26,"title":"CPU Usage vs Request/Limit","type":"timeseries","gridPos":{"h":8,"w":12,"x":0,"y":6},"targets":[{"expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\"}[5m]))","legendFormat":"usage","refId":"A"},{"expr":"sum(kube_pod_container_resource_requests{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\",resource=\"cpu\"})","legendFormat":"request","refId":"B"},{"expr":"sum(kube_pod_container_resource_limits{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\",resource=\"cpu\"})","legendFormat":"limit","refId":"C"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":27,"title":"CPU Throttling","type":"timeseries","gridPos":{"h":8,"w":12,"x":12,"y":6},"targets":[{"expr":"sum(rate(container_cpu_cfs_throttled_seconds_total{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\"}[5m]))","legendFormat":"throttled","refId":"A"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":202,"title":"Memory","type":"row","gridPos":{"h":1,"w":24,"x":0,"y":14}},{"id":28,"title":"Working Set vs Limit","type":"timeseries","gridPos":{"h":8,"w":12,"x":0,"y":15},"targets":[{"expr":"sum(container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\"})","legendFormat":"working set","refId":"A"},{"expr":"sum(kube_pod_container_resource_limits{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\",resource=\"memory\"})","legendFormat":"limit","refId":"B"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":29,"title":"OOM Kills and Restarts","type":"timeseries","gridPos":{"h":8,"w":12,"x":12,"y":15},"targets":[{"expr":"sum(kube_pod_container_status_restarts_total{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\"})","legendFormat":"restarts","refId":"A"},{"expr":"sum(kube_pod_container_status_last_terminated_reason{namespace=\"$namespace\",pod=~\"$instance-.*\",container=\"openclaw\",reason=\"OOMKilled\"})","legendFormat":"OOM killed","refId":"B"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":203,"title":"Network","type":"row","gridPos":{"h":1,"w":24,"x":0,"y":23},"panels":[{"id":30,"title":"Network I/O","type":"timeseries","gridPos":{"h":8,"w":24,"x":0,"y":24},"targets":[{"expr":"sum(rate(container_network_receive_bytes_total{namespace=\"$namespace\",pod=~\"$instance-.*\"}[5m]))","legendFormat":"receive","refId":"A"},{"expr":"sum(rate(container_network_transmit_bytes_total{namespace=\"$namespace\",pod=~\"$instance-.*\"}[5m]))","legendFormat":"transmit","refId":"B"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}}],"collapsed":true},{"id":204,"title":"Storage","type":"row","gridPos":{"h":1,"w":24,"x":0,"y":32},"panels":[{"id":31,"title":"PVC Usage","type":"timeseries","gridPos":{"h":8,"w":12,"x":0,"y":33},"targets":[{"expr":"kubelet_volume_stats_used_bytes{namespace=\"$namespace\",persistentvolumeclaim=~\"data-$instance.*\"}","legendFormat":"used","refId":"A"},{"expr":"kubelet_volume_stats_capacity_bytes{namespace=\"$namespace\",persistentvolumeclaim=~\"data-$instance.*\"}","legendFormat":"capacity","refId":"B"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":32,"title":"PVC Usage %","type":"gauge","gridPos":{"h":8,"w":12,"x":12,"y":33},"targets":[{"expr":"kubelet_volume_stats_used_bytes{namespace=\"$namespace\",persistentvolumeclaim=~\"data-$instance.*\"} / kubelet_volume_stats_capacity_bytes{namespace=\"$namespace\",persistentvolumeclaim=~\"data-$instance.*\"}","legendFormat":"","refId":"A","instant":true}],"fieldConfig":{"defaults":{"max":1,"min":0,"thresholds":{"steps":[{"color":"green","value":null},{"color":"yellow","value":0.8},{"color":"red","value":0.9}]},"unit":"percentunit"}},"datasource":{"type":"prometheus","uid":"${datasource}"}}],"collapsed":true},{"id":205,"title":"Pod Health","type":"row","gridPos":{"h":1,"w":24,"x":0,"y":41},"panels":[{"id":33,"title":"Container Restarts","type":"timeseries","gridPos":{"h":8,"w":12,"x":0,"y":42},"targets":[{"expr":"sum(kube_pod_container_status_restarts_total{namespace=\"$namespace\",pod=~\"$instance-.*\"}) by (container)","legendFormat":"{{ container }}","refId":"A"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}},{"id":34,"title":"Instance Reconciliation","type":"timeseries","gridPos":{"h":8,"w":12,"x":12,"y":42},"targets":[{"expr":"sum(rate(openclaw_reconcile_total{namespace=\"$namespace\",instance=\"$instance\"}[5m])) by (result)","legendFormat":"{{ result }}","refId":"A"}],"fieldConfig":{"defaults":{"custom":{"fillOpacity":10,"lineWidth":1,"pointSize":5,"showPoints":"auto"}}},"datasource":{"type":"prometheus","uid":"${datasource}"}}],"collapsed":true}],"schemaVersion":39,"tags":["openclaw","instance"],"templating":{"list":[{"current":{},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"current":{},"hide":0,"includeAll":false,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":"label_values(openclaw_instance_info, namespace)","refresh":2,"regex":"","type":"query","datasource":{"type":"prometheus","uid":"${datasource}"},"definition":"label_values(openclaw_instance_info, namespace)","sort":1},{"current":{},"hide":0,"includeAll":false,"label":"Instance","multi":false,"name":"instance","options":[],"query":"label_values(openclaw_instance_info{namespace=~\"$namespace\"}, instance)","refresh":2,"regex":"","type":"query","datasource":{"type":"prometheus","uid":"${datasource}"},"definition":"label_values(openclaw_instance_info{namespace=~\"$namespace\"}, instance)","sort":1}]},"time":{"from":"now-1h","to":"now"},"refresh":"30s","title":"OpenClaw Instance","uid":"openclaw-instance-detail"}